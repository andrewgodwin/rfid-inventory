{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load humanize %}
{% load static %}

{% block extra_head %}
    <script defer src="{% static "js/checklist_template.js" %}" type="module"></script>
{% endblock %}

{% block content %}

    <h1>{{ template.name }}</h1>

    <nav class="sub sub-light">
        <a href="{{ template.urls.delete }}" class="right dangerous"><i class="fa fa-trash" aria-hidden="true"></i> Delete</a>
        <a href="{{ template.urls.edit }}" class="right"><i class="fa fa-pencil" aria-hidden="true"></i> Edit</a>
    </nav>

    {% verbatim %}
    <div id="template-editor">
        <div class="actions">
            <button @click="showAdd">Add Item</button>
            <button @click="showAddHeading">Add Heading</button>
        </div>
        <modal v-if="showForm" @close="showForm = false">
            <div slot="content">
                <input v-model="currentItem.name" ref="itemName" placeholder="Item name" autocomplete="off" @keyup.enter="addItem">
                <input v-model="currentItem.heading" type="checkbox">
                <button @click="addItem">Save</button>
            </div>
        </modal>
        <table class="list">
            <tr>
                <th>Item</th>
            </tr>
            <tr v-for="item in items">
                <td>
                    <b v-if="item.heading">{{ item.name }}</b>
                    <span v-else>{{ item.name }}</span>
                </td>
            </tr>
        </table>
    </div>
    {% endverbatim %}

{% endblock content %}
